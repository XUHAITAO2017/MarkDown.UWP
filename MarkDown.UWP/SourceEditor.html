<!DOCTYPE html>
<html>
<head>
    <title>CodeMirror</title>
    <link rel="stylesheet" href="codemirror/lib/codemirror.css">
    <!--<link rel="stylesheet" href="codemirror/lib/font.css">-->
    <script src="codemirror/lib/codemirror.js"></script>
    <script src="codemirror/mode/markdown/markdown.js"></script>
    <script src="codemirror/addon/selection/active-line.js"></script>
    <script src="codemirror/addon/display/fullscreen.js"></script>
    <link rel="stylesheet" href="codemirror/addon/display/fullscreen.css">
</head>
<body>
    <div>
    <textarea id="source"></textarea>
    </div>
    <script>
        var mobile = /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);
        var fileref = document.createElement('link');
        fileref.setAttribute("rel", "stylesheet");
        fileref.setAttribute("type", "text/css");
        fileref.setAttribute("href", mobile ? "codemirror/lib/font.mobile.css" : "codemirror/lib/font.css");
        document.getElementsByTagName("head")[0].appendChild(fileref);

        var myCodeMirror = CodeMirror(document.getElementById("source"), {
            value: "",
            styleActiveLine: true,
            lineNumbers: true,
            fullScreen: true,
            lineWrapping: true,
            mode: "markdown"
        });

        

        myCodeMirror.on("change", function () {
            window.external.notify("change");
        })

        myCodeMirror.on("scroll", function () {
            window.external.notify("scroll");
        })

        var setContent = function (content) {
            myCodeMirror.doc.setValue(content)
        }

        var getContent = function () {
            return myCodeMirror.doc.getValue();
        }

        var getScrollRatio = function () {
            var info = myCodeMirror.getScrollInfo();
            var val = info.top / (info.height - info.clientHeight)
            return val.toString();
        }
    </script>
</body>
</html>